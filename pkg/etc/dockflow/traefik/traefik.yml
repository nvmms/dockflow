# ===============================
# Traefik 主配置（Static Config）
# ===============================

# Traefik 版本兼容声明（非必须，但推荐）
global:
  checkNewVersion: false
  sendAnonymousUsage: false

# -------------------------------
# EntryPoints（监听端口）
# -------------------------------
entryPoints:
  web:
    address: ":80"

  websecure:
    address: ":443"

# -------------------------------
# Providers
# -------------------------------
providers:
  # 文件 provider（动态路由核心）
  file:
    directory: /etc/traefik/dynamic
    watch: true

  # Docker provider（如果你后面需要 container label）
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false

# -------------------------------
# ACME / HTTPS（Let's Encrypt）
# -------------------------------
certificatesResolvers:
  letsencrypt:
    acme:
      email: ${TRAEFIK_ACME_EMAIL}
      storage: /var/lib/traefik/acme.json
      httpChallenge:
        entryPoint: web

# -------------------------------
# 日志
# -------------------------------
log:
  level: INFO          # DEBUG / INFO / WARN / ERROR
  format: common

accessLog:
  filePath: /var/log/traefik/access.log
  bufferingSize: 100

# -------------------------------
# API & Dashboard（生产可开）
# -------------------------------
api:
  dashboard: true
  insecure: false
